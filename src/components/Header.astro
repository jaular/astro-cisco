---
import { Icon } from "astro-icon";
import cn from "~/lib/classes";
import navigationLinks from "~/data/navigationLinks";
import ThemeButton from "./ThemeButton.astro";

const currentPage = Astro.url.pathname;
---

<header
  x-data="{ menuOpen: false }"
  class="w-full max-w-3xl mx-auto sm:px-6 lg:px-8"
>
  <div class="px-4 border-b border-gray-300 sm:px-0 dark:border-gray-800">
    <div class="relative flex items-center justify-between h-16">
      <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
        <!-- Mobile menu button-->
        <button
          x-on:click="menuOpen = ! menuOpen"
          type="button"
          class="inline-flex items-center justify-center text-gray-800 dark:text-gray hover:text-black dark:hover:text-white focus:outline outline-offset-4 focus:outline-1 focus:outline-blue"
          aria-controls="mobile-menu"
          aria-expanded="false"
        >
          <span class="sr-only">Open main menu</span>
          <!--
            Icon when menu is closed.

            Heroicon name: outline/menu

            Menu open: "hidden", Menu closed: "block"
          -->
          <Icon class="block w-6 h-6" name="menu" aria-hidden="true" />
        </button>
      </div>
      <div class="flex items-center justify-center flex-1 sm:justify-start">
        <div class="flex items-center flex-shrink-0">
          <!-- Logo -->
          <a
            href="/"
            aria-label="Logo"
            class="focus:outline outline-offset-4 focus:outline-1 focus:outline-blue"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-8 h-8 p-1.5 text-gray-800 rounded dark:text-gray bg-gray-200/50 dark:bg-black-600"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              fill="none"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
              <polyline points="5 7 10 12 5 17"></polyline>
              <line x1={13} y1={17} x2={19} y2={17}></line>
            </svg>
          </a>
        </div>
        <div class="hidden sm:block sm:ml-6">
          <div class="flex items-center space-x-6">
            {
              navigationLinks.map((item) => (
                <a
                  href={item.href}
                  class={cn(
                    item.href == currentPage
                      ? " text-blue-400 hover:text-blue-600 dark:hover:text-blue-200 focus:text-blue-600 dark:focus:text-blue-200"
                      : " text-gray-800 dark:text-gray hover:text-black dark:hover:text-white focus:text-black dark:focus:text-white",
                    "text-sm font-medium focus:outline-none"
                  )}
                  aria-current="page"
                >
                  {item.name}
                </a>
              ))
            }
          </div>
        </div>
      </div>
      <div
        class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0"
      >
        <ThemeButton />
      </div>
    </div>
  </div>

  <!-- Mobile menu, show/hide based on menu state. -->
  <div
    x-cloak
    class="sm:hidden"
    x-bind:class="menuOpen ? '' : 'hidden'"
    id="mobile-menu"
  >
    <div class="p-4 space-y-2 border-b border-b-gray-300 dark:border-gray-800">
      {
        navigationLinks.map((item) => (
          <a
            href={item.href}
            class={cn(
              item.href == currentPage
                ? " text-blue-400 hover:text-blue-600 dark:hover:text-blue-200 focus:text-blue-600 dark:focus:text-blue-200"
                : " text-gray-800 dark:text-gray hover:text-black dark:hover:text-white focus:text-black dark:focus:text-white",
              "block py-2 rounded text-sm font-medium focus:outline-none px-2 hover:bg-gray-100 dark:hover:bg-black-700 focus:bg-gray-100 dark:focus:bg-black-700"
            )}
            aria-current="page"
          >
            {item.name}
          </a>
        ))
      }
    </div>
  </div>
</header>

<style>
  [x-cloak] {
    display: none;
  }
</style>

<!-- https://alpinejs.dev/directives/cloak -->
